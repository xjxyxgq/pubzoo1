# MySQL表空间回收工具配置文件示例

# 数据库连接配置
database:
  default_host: "localhost"
  default_port: 3306
  default_user: "root"
  default_database: "information_schema"
  timeout: "30s"
  max_connections: 10
  conn_max_lifetime: "5m"
  conn_max_idle_time: "1m"

# 回收器配置
recycler:
  default_threshold: "100MB"        # 默认碎片回收阈值
  default_mode: 1                   # 1=独立节点模式, 2=复制同步模式
  max_concurrency: 10               # 最大并发数
  default_concurrency: 3            # 默认并发数
  allow_master_operations: false    # 是否允许在主节点执行操作
  safety_check_interval: "30s"      # 安全检查间隔
  table_lock_timeout: "5m"          # 表锁超时时间
  min_table_size: "10MB"            # 最小表大小
  max_table_size: ""                # 最大表大小（空表示无限制）
  supported_engines:                # 支持的存储引擎
    - "InnoDB"
  exclude_schemas:                  # 默认排除的数据库
    - "information_schema"
    - "performance_schema"
    - "mysql"
    - "sys"

# 监控配置
monitoring:
  status_file: "/tmp/mysql-recycler-status.json"
  persist_interval: "5m"
  max_history_records: 1000
  enable_auto_save: true
  enable_notification: false
  webhook_url: ""                   # Webhook通知URL

# 外部API配置
external_api:
  cluster_info_url: ""              # 集群信息API URL
  timeout: "10s"
  retry_times: 3
  enable_cache: true
  cache_timeout: "5m"
  auth_token: ""                    # 认证令牌

# 日志配置
logging:
  level: "info"                     # debug, info, warn, error
  format: "text"                    # text, json
  output_file: ""                   # 空表示输出到控制台
  max_size: 100                     # 日志文件最大大小(MB)
  max_backups: 3                    # 保留的备份文件数
  max_age: 7                        # 日志文件最大保留天数
  compress: true                    # 是否压缩旧日志文件